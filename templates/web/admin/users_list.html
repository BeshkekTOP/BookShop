{% extends 'web/base.html' %}
{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏{% endblock %}
{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
	<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
		<h1 style="margin: 0;">üë• –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏</h1>
		<a href="/admin/users/create/" class="btn" style="background: #10b981;">+ –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è</a>
	</div>
	
	<!-- –ü–æ–∏—Å–∫ –∏ —Ñ–∏–ª—å—Ç—Ä—ã -->
	<div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
		<form method="get" style="display: grid; grid-template-columns: 2fr 1fr auto; gap: 10px; align-items: end;">
			<div>
				<label style="display: block; margin-bottom: 5px; font-weight: 500;">–ü–æ–∏—Å–∫:</label>
				<input type="text" name="search" value="{{ search }}" placeholder="–ò–º—è, email, —Ç–µ–ª–µ—Ñ–æ–Ω..." 
				       style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
			</div>
			<div>
				<label style="display: block; margin-bottom: 5px; font-weight: 500;">–†–æ–ª—å:</label>
				<select name="role" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
					<option value="">–í—Å–µ —Ä–æ–ª–∏</option>
					<option value="guest" {% if role_filter == 'guest' %}selected{% endif %}>–ì–æ—Å—Ç—å</option>
					<option value="buyer" {% if role_filter == 'buyer' %}selected{% endif %}>–ü–æ–∫—É–ø–∞—Ç–µ–ª—å</option>
					<option value="manager" {% if role_filter == 'manager' %}selected{% endif %}>–ú–µ–Ω–µ–¥–∂–µ—Ä</option>
					<option value="admin" {% if role_filter == 'admin' %}selected{% endif %}>–ê–¥–º–∏–Ω–∏—Å—Ç—Ä–∞—Ç–æ—Ä</option>
				</select>
			</div>
			<div>
				<button type="submit" class="btn">–ü–æ–∏—Å–∫</button>
				<a href="/admin/users/" class="btn" style="background: #6b7280;">–°–±—Ä–æ—Å–∏—Ç—å</a>
			</div>
		</form>
	</div>
	
	<!-- –¢–∞–±–ª–∏—Ü–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π -->
	<div style="background: #fff; border-radius: 8px; overflow: hidden; border: 1px solid #e5e7eb;">
		<table style="width: 100%; border-collapse: collapse;">
			<thead style="background: #f9fafb;">
				<tr>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
					<th style="padding: 12px; text-align: left; font-weight: 600;">Email</th>
					<th style="padding: 12px; text-align: center; font-weight: 600;">–†–æ–ª—å</th>
					<th style="padding: 12px; text-align: center; font-weight: 600;">–î–∞—Ç–∞ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏</th>
					<th style="padding: 12px; text-align: center; font-weight: 600;">–î–µ–π—Å—Ç–≤–∏—è</th>
				</tr>
			</thead>
			<tbody>
				{% for user in users %}
				<tr style="border-top: 1px solid #e5e7eb;">
					<td style="padding: 12px;">
						<strong>{{ user.username }}</strong>
						{% if user.first_name or user.last_name %}
							<br><small style="color: #6b7280;">{{ user.first_name }} {{ user.last_name }}</small>
						{% endif %}
					</td>
					<td style="padding: 12px;">{{ user.email|default:"‚Äî" }}</td>
					<td style="padding: 12px; text-align: center;">
						<span style="padding: 4px 8px; border-radius: 4px; font-size: 0.85em;
							{% if user.profile.role == 'admin' %}background: #fee2e2; color: #991b1b;
							{% elif user.profile.role == 'manager' %}background: #dbeafe; color: #1e40af;
							{% elif user.profile.role == 'buyer' %}background: #dcfce7; color: #166534;
							{% else %}background: #f3f4f6; color: #6b7280;{% endif %}">
							{{ user.profile.get_role_display }}
						</span>
					</td>
					<td style="padding: 12px; text-align: center; color: #6b7280;">
						{{ user.date_joined|date:"d.m.Y" }}
					</td>
					<td style="padding: 12px; text-align: center;">
						<a href="/admin/users/{{ user.id }}/" class="btn small">–ü—Ä–æ—Å–º–æ—Ç—Ä</a>
					</td>
				</tr>
				{% empty %}
				<tr>
					<td colspan="5" style="padding: 40px; text-align: center; color: #6b7280;">
						–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %}
























