{% extends 'web/base.html' %}
{% block title %}–õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π{% endblock %}
{% block content %}
<div style="max-width: 1400px; margin: 0 auto; padding: 20px;">
	<h1>üìù –õ–æ–≥–∏ –¥–µ–π—Å—Ç–≤–∏–π</h1>
	
	<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb; margin-top: 20px; overflow-x: auto;">
		<table style="width: 100%; border-collapse: collapse;">
			<thead style="background: #f9fafb;">
				<tr>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–î–∞—Ç–∞/–í—Ä–µ–º—è</th>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–î–µ–π—Å—Ç–≤–∏–µ</th>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å</th>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–û–ø–∏—Å–∞–Ω–∏–µ</th>
					<th style="padding: 12px; text-align: left; font-weight: 600;">IP</th>
				</tr>
			</thead>
			<tbody>
				{% for log in logs %}
				<tr style="border-top: 1px solid #e5e7eb;">
					<td style="padding: 12px; color: #6b7280; white-space: nowrap;">
						{{ log.created_at|date:"d.m.Y H:i:s" }}
					</td>
					<td style="padding: 12px;">
						{% if log.action == 'created' %}
							<span style="color: #10b981; font-weight: 600;">üÜï –°–æ–∑–¥–∞–Ω–æ</span>
						{% elif log.action == 'updated' %}
							<span style="color: #2563eb; font-weight: 600;">‚úèÔ∏è –û–±–Ω–æ–≤–ª–µ–Ω–æ</span>
						{% elif log.action == 'deleted' %}
							<span style="color: #ef4444; font-weight: 600;">üóëÔ∏è –£–¥–∞–ª–µ–Ω–æ</span>
						{% elif log.action == 'login' %}
							<span style="color: #10b981; font-weight: 600;">üîê –í—Ö–æ–¥</span>
						{% elif log.action == 'logout' %}
							<span style="color: #f59e0b; font-weight: 600;">üö™ –í—ã—Ö–æ–¥</span>
						{% elif log.action == 'registered' %}
							<span style="color: #8b5cf6; font-weight: 600;">üìù –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è</span>
						{% elif log.action == 'backup_created' %}
							<span style="color: #10b981; font-weight: 600;">üíæ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —Å–æ–∑–¥–∞–Ω–∞</span>
						{% elif log.action == 'backup_restored' %}
							<span style="color: #2563eb; font-weight: 600;">üîÑ –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∞</span>
						{% elif log.action == 'backup_deleted' %}
							<span style="color: #ef4444; font-weight: 600;">üóëÔ∏è –†–µ–∑–µ—Ä–≤–Ω–∞—è –∫–æ–ø–∏—è —É–¥–∞–ª–µ–Ω–∞</span>
						{% else %}
							<span style="color: #6b7280;">{{ log.get_action_display }}</span>
						{% endif %}
					</td>
					<td style="padding: 12px;">
						{% if log.actor %}
							<strong>{{ log.actor.username }}</strong>
						{% else %}
							<span style="color: #6b7280;">–°–∏—Å—Ç–µ–º–∞</span>
						{% endif %}
					</td>
					<td style="padding: 12px;">
						{% if log.description %}
							{{ log.description }}
						{% elif log.old_data and log.new_data %}
							<details style="cursor: pointer;">
								<summary style="color: #2563eb;">–ü–æ–¥—Ä–æ–±–Ω–æ—Å—Ç–∏</summary>
								<div style="margin-top: 8px; padding: 8px; background: #f9fafb; border-radius: 4px; font-size: 0.85em;">
									<div style="margin-bottom: 4px;"><strong>–ë—ã–ª–æ:</strong> {{ log.old_data }}</div>
									<div><strong>–°—Ç–∞–ª–æ:</strong> {{ log.new_data }}</div>
								</div>
							</details>
						{% else %}
							‚Äî
						{% endif %}
					</td>
					<td style="padding: 12px; color: #6b7280; font-family: monospace; font-size: 0.9em;">
						{{ log.ip_address|default:"‚Äî" }}
					</td>
				</tr>
				{% empty %}
				<tr>
					<td colspan="5" style="padding: 40px; text-align: center; color: #6b7280;">
						–õ–æ–≥–æ–≤ –ø–æ–∫–∞ –Ω–µ—Ç
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %}























