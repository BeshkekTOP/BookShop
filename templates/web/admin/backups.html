{% extends 'web/base.html' %}
{% block title %}–†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏{% endblock %}
{% block content %}
<div style="max-width: 1400px; margin: 0 auto; padding: 20px;">
	<h1>üíæ –†–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏</h1>
	
	<div style="margin-bottom: 20px;">
		<form method="post" action="{% url 'admin-backup-create' %}" style="display: inline-block;">
			{% csrf_token %}
			<button type="submit" class="btn" style="background: #10b981;">üíæ –°–æ–∑–¥–∞—Ç—å —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é</button>
		</form>
	</div>
	
	<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb; margin-top: 20px; overflow-x: auto;">
		{% if backups %}
		<table style="width: 100%; border-collapse: collapse;">
			<thead style="background: #f9fafb;">
				<tr>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–ò–º—è —Ñ–∞–π–ª–∞</th>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–†–∞–∑–º–µ—Ä</th>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–î–µ–π—Å—Ç–≤–∏—è</th>
				</tr>
			</thead>
			<tbody>
				{% for backup in backups %}
				<tr style="border-top: 1px solid #e5e7eb;">
					<td style="padding: 12px;">
						<strong>{{ backup.filename }}</strong>
					</td>
					<td style="padding: 12px; color: #6b7280;">
						{{ backup.size|filesizeformat }}
					</td>
					<td style="padding: 12px; color: #6b7280;">
						{{ backup.created_at|date:"d.m.Y H:i:s" }}
					</td>
					<td style="padding: 12px;">
						<div style="display: flex; gap: 8px; flex-wrap: wrap;">
							<form method="post" action="{% url 'admin-backup-restore' backup.filename %}" style="display: inline-block;" 
							      onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ –≤–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –¥–∞–Ω–Ω—ã–µ –∏–∑ —ç—Ç–æ–π —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏? –≠—Ç–æ –¥–µ–π—Å—Ç–≤–∏–µ –∑–∞–º–µ–Ω–∏—Ç –≤—Å–µ —Ç–µ–∫—É—â–∏–µ –¥–∞–Ω–Ω—ã–µ!');">
								{% csrf_token %}
								<button type="submit" class="btn small" style="background: #f59e0b; color: white;" title="–í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å">
									üîÑ –í–æ—Å—Å—Ç–∞–Ω–æ–≤–∏—Ç—å
								</button>
							</form>
							<a href="{% url 'admin-backup-download' backup.filename %}" class="btn small" style="background: #2563eb; color: white;" title="–°–∫–∞—á–∞—Ç—å">
								‚¨áÔ∏è –°–∫–∞—á–∞—Ç—å
							</a>
							<form method="post" action="{% url 'admin-backup-delete' backup.filename %}" style="display: inline-block;"
							      onsubmit="return confirm('–í—ã —É–≤–µ—Ä–µ–Ω—ã, —á—Ç–æ —Ö–æ—Ç–∏—Ç–µ —É–¥–∞–ª–∏—Ç—å —ç—Ç—É —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é?');">
								{% csrf_token %}
								<button type="submit" class="btn small" style="background: #ef4444; color: white;" title="–£–¥–∞–ª–∏—Ç—å">
									üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
								</button>
							</form>
						</div>
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
		{% else %}
		<div style="padding: 40px; text-align: center; color: #6b7280;">
			<p>–†–µ–∑–µ—Ä–≤–Ω—ã—Ö –∫–æ–ø–∏–π –ø–æ–∫–∞ –Ω–µ—Ç</p>
			<p style="margin-top: 8px; font-size: 0.9em;">–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é —Ä–µ–∑–µ—Ä–≤–Ω—É—é –∫–æ–ø–∏—é, –Ω–∞–∂–∞–≤ –Ω–∞ –∫–Ω–æ–ø–∫—É –≤—ã—à–µ</p>
		</div>
		{% endif %}
	</div>
	
	<div style="margin-top: 20px;">
		<a href="/admin/dashboard/" class="btn btn-ghost">‚Üê –ù–∞–∑–∞–¥ –∫ –ø–∞–Ω–µ–ª–∏</a>
	</div>
</div>
{% endblock %}

