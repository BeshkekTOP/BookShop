{% extends 'web/base.html' %}
{% block title %}–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏{% endblock %}
{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
	<h1>üì¶ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –æ—Å—Ç–∞—Ç–∫–∞–º–∏ –Ω–∞ —Å–∫–ª–∞–¥–µ</h1>
	
	<!-- –ü–æ–∏—Å–∫ -->
	<div style="background: #f9fafb; padding: 20px; border-radius: 8px; margin-bottom: 20px;">
		<form method="get" style="display: flex; gap: 10px;">
			<input type="text" name="search" value="{{ search }}" placeholder="–ü–æ–∏—Å–∫ –ø–æ –Ω–∞–∑–≤–∞–Ω–∏—é –∫–Ω–∏–≥–∏..." 
			       style="flex: 1; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
			<button type="submit" class="btn">–ü–æ–∏—Å–∫</button>
			<a href="/admin/inventory/" class="btn" style="background: #6b7280;">–°–±—Ä–æ—Å–∏—Ç—å</a>
		</form>
	</div>
	
	<!-- –¢–∞–±–ª–∏—Ü–∞ -->
	<div style="background: #fff; border-radius: 8px; overflow: hidden; border: 1px solid #e5e7eb;">
		<table style="width: 100%; border-collapse: collapse;">
			<thead style="background: #f9fafb;">
				<tr>
					<th style="padding: 12px; text-align: left; font-weight: 600;">–ö–Ω–∏–≥–∞</th>
					<th style="padding: 12px; text-align: center; font-weight: 600;">–ö–∞—Ç–µ–≥–æ—Ä–∏—è</th>
					<th style="padding: 12px; text-align: right; font-weight: 600;">–¶–µ–Ω–∞</th>
					<th style="padding: 12px; text-align: center; font-weight: 600;">–ù–∞ —Å–∫–ª–∞–¥–µ</th>
					<th style="padding: 12px; text-align: center; font-weight: 600;">–ó–∞—Ä–µ–∑–µ—Ä–≤–∏—Ä–æ–≤–∞–Ω–æ</th>
					<th style="padding: 12px; text-align: center; font-weight: 600;">–î–æ—Å—Ç—É–ø–Ω–æ</th>
					<th style="padding: 12px; text-align: center; font-weight: 600;">–î–µ–π—Å—Ç–≤–∏—è</th>
				</tr>
			</thead>
			<tbody>
				{% for book in books %}
				<tr style="border-top: 1px solid #e5e7eb;">
					<td style="padding: 12px;">
						<strong>{{ book.title }}</strong>
						<br><small style="color: #6b7280;">ISBN: {{ book.isbn }}</small>
					</td>
					<td style="padding: 12px; text-align: center;">{{ book.category.name }}</td>
					<td style="padding: 12px; text-align: right;">{{ book.price }} ‚ÇΩ</td>
					{% if book.inventory %}
					<td style="padding: 12px; text-align: center; font-weight: 600;">{{ book.inventory.stock }}</td>
					<td style="padding: 12px; text-align: center; color: #f59e0b;">{{ book.inventory.reserved }}</td>
					<td style="padding: 12px; text-align: center;">
						<span style="font-weight: 600;
							{% if book.inventory.available > 10 %}color: #10b981;
							{% elif book.inventory.available > 0 %}color: #f59e0b;
							{% else %}color: #ef4444;{% endif %}">
							{{ book.inventory.available }}
						</span>
					</td>
					<td style="padding: 12px; text-align: center;">
						<form method="post" action="/admin/inventory/{{ book.id }}/update/" style="display: flex; gap: 5px;">
							{% csrf_token %}
							<input type="number" name="stock" value="{{ book.inventory.stock }}" min="0" 
							       style="width: 80px; padding: 4px; border: 1px solid #d1d5db; border-radius: 4px;">
							<button type="submit" class="btn small">–û–±–Ω–æ–≤–∏—Ç—å</button>
						</form>
					</td>
					{% else %}
					<td colspan="4" style="padding: 12px; text-align: center; color: #6b7280;">
						–ù–µ—Ç –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ —Å–∫–ª–∞–¥–µ
					</td>
					{% endif %}
				</tr>
				{% empty %}
				<tr>
					<td colspan="7" style="padding: 40px; text-align: center; color: #6b7280;">
						–ö–Ω–∏–≥–∏ –Ω–µ –Ω–∞–π–¥–µ–Ω—ã
					</td>
				</tr>
				{% endfor %}
			</tbody>
		</table>
	</div>
</div>
{% endblock %}
















