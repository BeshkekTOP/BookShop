{% extends 'web/base.html' %}
{% block title %}–ó–∞–∫–∞–∑—ã{% endblock %}
{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
	<h1>üìã –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫–∞–∑–∞–º–∏</h1>
	
	<!-- –§–∏–ª—å—Ç—Ä—ã -->
	<div style="background: #fff; padding: 20px; border-radius: 8px; margin-bottom: 20px; border: 1px solid #e5e7eb;">
		<h2 style="margin: 0 0 15px 0;">üîç –§–∏–ª—å—Ç—Ä—ã</h2>
		<form method="get" style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 15px; align-items: end;">
			<div>
				<label style="display: block; margin-bottom: 5px; font-weight: 600;">–°—Ç–∞—Ç—É—Å:</label>
				<select name="status" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
					{% for value, label in status_choices %}
					<option value="{{ value }}" {% if value == current_status %}selected{% endif %}>{{ label }}</option>
					{% endfor %}
				</select>
			</div>
			<div>
				<label style="display: block; margin-bottom: 5px; font-weight: 600;">–î–∞—Ç–∞ –æ—Ç:</label>
				<input type="date" name="date_from" value="{{ date_from }}" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
			</div>
			<div>
				<label style="display: block; margin-bottom: 5px; font-weight: 600;">–î–∞—Ç–∞ –¥–æ:</label>
				<input type="date" name="date_to" value="{{ date_to }}" style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
			</div>
			<div>
				<label style="display: block; margin-bottom: 5px; font-weight: 600;">–ü–æ–∏—Å–∫:</label>
				<input type="text" name="search" value="{{ search }}" placeholder="‚Ññ –∑–∞–∫–∞–∑–∞, –∫–ª–∏–µ–Ω—Ç, –∞–¥—Ä–µ—Å..." style="width: 100%; padding: 8px; border: 1px solid #d1d5db; border-radius: 6px;">
			</div>
			<div style="display: flex; gap: 10px;">
				<button type="submit" style="background: #2563eb; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer;">
					üîç –ü—Ä–∏–º–µ–Ω–∏—Ç—å
				</button>
				<a href="/manager/orders/" style="background: #6b7280; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; text-decoration: none; display: inline-block;">
					üîÑ –°–±—Ä–æ—Å–∏—Ç—å
				</a>
			</div>
		</form>
	</div>
	
	<!-- –°–ø–∏—Å–æ–∫ –∑–∞–∫–∞–∑–æ–≤ -->
	<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
		<div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 20px;">
			<h2 style="margin: 0;">–ó–∞–∫–∞–∑—ã ({{ orders|length }})</h2>
			<a href="/manager/" style="background: #6b7280; color: white; padding: 8px 16px; border: none; border-radius: 6px; cursor: pointer; text-decoration: none;">
				‚Üê –ù–∞–∑–∞–¥ –∫ –ø–∞–Ω–µ–ª–∏
			</a>
		</div>
		
		{% if orders %}
		<div style="overflow-x: auto;">
			<table style="width: 100%; border-collapse: collapse;">
				<thead style="background: #f9fafb;">
					<tr>
						<th style="padding: 12px; text-align: left;">‚Ññ –ó–∞–∫–∞–∑–∞</th>
						<th style="padding: 12px; text-align: left;">–ö–ª–∏–µ–Ω—Ç</th>
						<th style="padding: 12px; text-align: right;">–°—É–º–º–∞</th>
						<th style="padding: 12px; text-align: center;">–°—Ç–∞—Ç—É—Å</th>
						<th style="padding: 12px; text-align: left;">–î–∞—Ç–∞ —Å–æ–∑–¥–∞–Ω–∏—è</th>
						<th style="padding: 12px; text-align: center;">–î–µ–π—Å—Ç–≤–∏—è</th>
					</tr>
				</thead>
				<tbody>
					{% for order in orders %}
					<tr style="border-top: 1px solid #e5e7eb;">
						<td style="padding: 12px; font-weight: 600;">#{{ order.id }}</td>
						<td style="padding: 12px;">
							<div>
								<strong>{{ order.user.username }}</strong><br>
								<small style="color: #6b7280;">{{ order.user.email|default:"‚Äî" }}</small>
							</div>
						</td>
						<td style="padding: 12px; text-align: right; font-weight: 600;">{{ order.total_amount }} ‚ÇΩ</td>
						<td style="padding: 12px; text-align: center;">
							<span style="padding: 6px 12px; border-radius: 4px; font-size: 0.9em; font-weight: 600;
								{% if order.status == 'new' %}background: #fef3c7; color: #92400e;
								{% elif order.status == 'processing' %}background: #e0e7ff; color: #3730a3;
								{% elif order.status == 'shipped' %}background: #dbeafe; color: #1e40af;
								{% elif order.status == 'delivered' %}background: #dcfce7; color: #166534;
								{% elif order.status == 'cancelled' %}background: #fee2e2; color: #991b1b;
								{% endif %}">
								{{ order.get_status_display }}
							</span>
						</td>
						<td style="padding: 12px;">{{ order.created_at|date:"d.m.Y H:i" }}</td>
						<td style="padding: 12px; text-align: center;">
							<a href="/manager/orders/{{ order.id }}/" style="background: #2563eb; color: white; padding: 6px 12px; border: none; border-radius: 4px; text-decoration: none; font-size: 0.9em;">
								üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä
							</a>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		{% else %}
		<div style="text-align: center; padding: 40px; color: #6b7280;">
			<p style="margin: 0; font-size: 1.1em;">–ó–∞–∫–∞–∑—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</p>
			<p style="margin: 10px 0 0 0;">–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∏–∑–º–µ–Ω–∏—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏</p>
		</div>
		{% endif %}
	</div>
</div>
{% endblock %}
