{% extends 'web/base.html' %}
{% block title %}–ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞{% endblock %}
{% block content %}
<div style="max-width: 1200px; margin: 0 auto; padding: 20px;">
	<h1>üë®‚Äçüíº –ü–∞–Ω–µ–ª—å –º–µ–Ω–µ–¥–∂–µ—Ä–∞</h1>
	
	<!-- –û–±—â–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ -->
	<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 20px; margin: 30px 0;">
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h3 style="margin: 0 0 10px 0; color: #6b7280;">–í—Å–µ–≥–æ –∑–∞–∫–∞–∑–æ–≤</h3>
			<p style="font-size: 2em; margin: 0; color: #2563eb; font-weight: bold;">{{ total_orders }}</p>
		</div>
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h3 style="margin: 0 0 10px 0; color: #6b7280;">–ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã</h3>
			<p style="font-size: 2em; margin: 0; color: #f59e0b; font-weight: bold;">{{ new_orders }}</p>
		</div>
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h3 style="margin: 0 0 10px 0; color: #6b7280;">–í –æ–±—Ä–∞–±–æ—Ç–∫–µ</h3>
			<p style="font-size: 2em; margin: 0; color: #8b5cf6; font-weight: bold;">{{ processing_orders }}</p>
		</div>
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h3 style="margin: 0 0 10px 0; color: #6b7280;">–û—Ç–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ</h3>
			<p style="font-size: 2em; margin: 0; color: #0ea5e9; font-weight: bold;">{{ shipped_orders }}</p>
		</div>
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h3 style="margin: 0 0 10px 0; color: #6b7280;">–î–æ—Å—Ç–∞–≤–ª–µ–Ω–Ω—ã–µ</h3>
			<p style="font-size: 2em; margin: 0; color: #10b981; font-weight: bold;">{{ delivered_orders }}</p>
		</div>
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h3 style="margin: 0 0 10px 0; color: #6b7280;">–û—Ç–º–µ–Ω–µ–Ω–Ω—ã–µ</h3>
			<p style="font-size: 2em; margin: 0; color: #ef4444; font-weight: bold;">{{ cancelled_orders }}</p>
		</div>
	</div>
	
	<!-- –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∑–∞ —Å–µ–≥–æ–¥–Ω—è –∏ –Ω–µ–¥–µ–ª—é -->
	<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h2 style="margin: 0 0 15px 0;">üìÖ –°–µ–≥–æ–¥–Ω—è</h2>
			<div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
				<span>–ó–∞–∫–∞–∑–æ–≤:</span>
				<strong>{{ today_orders }}</strong>
			</div>
			<div style="display: flex; justify-content: space-between;">
				<span>–í—ã—Ä—É—á–∫–∞:</span>
				<strong style="color: #10b981;">{{ today_revenue|floatformat:0 }} ‚ÇΩ</strong>
			</div>
		</div>
		
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h2 style="margin: 0 0 15px 0;">üìä –ó–∞ –Ω–µ–¥–µ–ª—é</h2>
			<div style="display: flex; justify-content: space-between; margin-bottom: 10px;">
				<span>–ó–∞–∫–∞–∑–æ–≤:</span>
				<strong>{{ week_orders }}</strong>
			</div>
			<div style="display: flex; justify-content: space-between;">
				<span>–í—ã—Ä—É—á–∫–∞:</span>
				<strong style="color: #10b981;">{{ week_revenue|floatformat:0 }} ‚ÇΩ</strong>
			</div>
		</div>
	</div>
	
	<!-- –û—Å–Ω–æ–≤–Ω—ã–µ –¥–µ–π—Å—Ç–≤–∏—è -->
	<div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 20px; margin: 30px 0;">
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h2 style="margin: 0 0 15px 0;">üöÄ –ë—ã—Å—Ç—Ä—ã–µ –¥–µ–π—Å—Ç–≤–∏—è</h2>
			<ul style="list-style: none; padding: 0; margin: 0;">
				<li style="margin: 8px 0;"><a href="/manager/orders/" style="color: #2563eb; text-decoration: none;">üìã –í—Å–µ –∑–∞–∫–∞–∑—ã</a></li>
				<li style="margin: 8px 0;"><a href="/manager/orders/?status=new" style="color: #f59e0b; text-decoration: none;">üÜï –ù–æ–≤—ã–µ –∑–∞–∫–∞–∑—ã</a></li>
				<li style="margin: 8px 0;"><a href="/manager/orders/?status=processing" style="color: #8b5cf6; text-decoration: none;">‚öôÔ∏è –í –æ–±—Ä–∞–±–æ—Ç–∫–µ</a></li>
				<li style="margin: 8px 0;"><a href="/manager/statistics/" style="color: #10b981; text-decoration: none;">üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø—Ä–æ–¥–∞–∂</a></li>
			</ul>
		</div>
		
		<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
			<h2 style="margin: 0 0 15px 0;">üìö –¢–æ–ø-5 –∫–Ω–∏–≥ –∑–∞ –Ω–µ–¥–µ–ª—é</h2>
			{% if top_books %}
			<ul style="list-style: none; padding: 0; margin: 0;">
				{% for book in top_books %}
				<li style="margin: 8px 0; padding: 8px; background: #f9fafb; border-radius: 4px;">
					<strong>{{ book.title }}</strong><br>
					<small style="color: #6b7280;">{{ book.week_orders }} –∑–∞–∫–∞–∑–æ–≤, {{ book.week_quantity }} —à—Ç.</small>
				</li>
				{% endfor %}
			</ul>
			{% else %}
			<p style="color: #6b7280; margin: 0;">–ù–µ—Ç –¥–∞–Ω–Ω—ã—Ö –∑–∞ –Ω–µ–¥–µ–ª—é</p>
			{% endif %}
		</div>
	</div>
	
	<!-- –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã -->
	<div style="background: #fff; padding: 20px; border-radius: 8px; border: 1px solid #e5e7eb;">
		<h2 style="margin: 0 0 15px 0;">üìã –ü–æ—Å–ª–µ–¥–Ω–∏–µ –∑–∞–∫–∞–∑—ã</h2>
		{% if recent_orders %}
		<div style="overflow-x: auto;">
			<table style="width: 100%; border-collapse: collapse;">
				<thead style="background: #f9fafb;">
					<tr>
						<th style="padding: 10px; text-align: left;">‚Ññ –ó–∞–∫–∞–∑–∞</th>
						<th style="padding: 10px; text-align: left;">–ö–ª–∏–µ–Ω—Ç</th>
						<th style="padding: 10px; text-align: right;">–°—É–º–º–∞</th>
						<th style="padding: 10px; text-align: center;">–°—Ç–∞—Ç—É—Å</th>
						<th style="padding: 10px; text-align: left;">–î–∞—Ç–∞</th>
						<th style="padding: 10px; text-align: center;">–î–µ–π—Å—Ç–≤–∏—è</th>
					</tr>
				</thead>
				<tbody>
					{% for order in recent_orders %}
					<tr style="border-top: 1px solid #e5e7eb;">
						<td style="padding: 10px;">#{{ order.id }}</td>
						<td style="padding: 10px;">{{ order.user.username }}</td>
						<td style="padding: 10px; text-align: right; font-weight: 600;">{{ order.total_amount }} ‚ÇΩ</td>
						<td style="padding: 10px; text-align: center;">
							<span style="padding: 4px 8px; border-radius: 4px; font-size: 0.9em;
								{% if order.status == 'new' %}background: #fef3c7; color: #92400e;
								{% elif order.status == 'processing' %}background: #e0e7ff; color: #3730a3;
								{% elif order.status == 'shipped' %}background: #dbeafe; color: #1e40af;
								{% elif order.status == 'delivered' %}background: #dcfce7; color: #166534;
								{% elif order.status == 'cancelled' %}background: #fee2e2; color: #991b1b;
								{% endif %}">
								{{ order.get_status_display }}
							</span>
						</td>
						<td style="padding: 10px;">{{ order.created_at|date:"d.m.Y H:i" }}</td>
						<td style="padding: 10px; text-align: center;">
							<a href="/manager/orders/{{ order.id }}/" style="color: #2563eb; text-decoration: none;">üëÅÔ∏è –ü—Ä–æ—Å–º–æ—Ç—Ä</a>
						</td>
					</tr>
					{% endfor %}
				</tbody>
			</table>
		</div>
		{% else %}
		<p style="color: #6b7280; text-align: center; padding: 20px;">–ù–µ—Ç –∑–∞–∫–∞–∑–æ–≤</p>
		{% endif %}
	</div>
</div>
{% endblock %}






